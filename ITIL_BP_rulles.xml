<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="РежимСовместимостиСБСП20">2.01</ВерсияФормата>
	<Ид>4aa509b9-bb14-405b-8c3b-c8aab3e6c121    </Ид>
	<Наименование>НоменклатураПоставщиков - НоменклатураКонтрагентов</Наименование>
	<ДатаВремяСоздания>2023-02-16T13:24:34</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="1.2.3.6" СинонимКонфигурации="1С:ITIL Управление информационными технологиями предприятия. КОРП, редакция 1.2">ITILКОРП</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="3.0.105.14" СинонимКонфигурации="Управление недвижимостью и арендой КОРП на базе &quot;1С:Бухгалтерия 8 КОРП&quot;, редакция 3.0">УправлениеНедвижимостьюИАрендойКОРП</Приемник>
	<ПослеЗагрузкиОбъекта>Если ИмяТипаОбъекта = "Документ" Тогда
	ПроверкаДатыЗапрета = ДатыЗапретаИзмененияСлужебный.ПроверитьДатыЗапретаИзмененияЗагрузкиДанных(Объект, Ложь, Ложь, Ложь);
	Проверка = Ложь;
	Если ЗначениеЗаполнено(Ссылка) Тогда	
		Проверка = РегистрыСведений.пит_ПровереноБухгалтером.ПровереноБухгалтером(Ссылка);
	КонецЕсли;
	
	Отказ = ПроверкаДатыЗапрета.ИзменениеЗапрещено Или Проверка;
	
	Если Отказ Тогда
		
		ТекстСообщения = "";
		Если ПроверкаДатыЗапрета.ИзменениеЗапрещено Тогда
			ТекстСообщения = "ЗАПРЕТ ЗАГРУЗКИ: Дата запрета редактирования." + Символы.ПС;
		КонецЕсли;
		
		Если Проверка Тогда
			ТекстСообщения = ТекстСообщения + "ЗАПРЕТ ЗАГРУЗКИ: Объект " + Ссылка.Номер + " проверен.";
		КонецЕсли;
		
		Выполнить(Алгоритмы.ЗаписатьВПротоколЗагрузкаТолькоИнформация);
		
	КонецЕсли;
КонецЕсли;</ПослеЗагрузкиОбъекта>
	<Параметры/>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>ПоступлениеТоваровУслуг</Код>
				<Наименование>Документ: Поступление активов</Наименование>
				<Порядок>50</Порядок>
				<ПослеЗагрузки>Если Объект.Оборудование.Количество() = 0 Тогда
	Если Объект.Услуги.Количество() = 0 Тогда
		Объект.ВидОперации = Перечисления.ВидыОперацийПоступлениеТоваровУслуг.Товары;
	ИначеЕсли Объект.Товары.Количество() = 0 Тогда
		Объект.ВидОперации = Перечисления.ВидыОперацийПоступлениеТоваровУслуг.Услуги;
	Иначе
		Объект.ВидОперации = Перечисления.ВидыОперацийПоступлениеТоваровУслуг.ПокупкаКомиссия;
	КонецЕсли;  	
Иначе
	Объект.ВидОперации = Перечисления.ВидыОперацийПоступлениеТоваровУслуг.Оборудование;
КонецЕсли;

Объект.пит_СкладВТабличнойЧасти = Истина;

Объект.Товары.Свернуть("Номенклатура, СтавкаНДС, пит_Склад, Цена", "Количество, Сумма, СуммаНДС");
Объект.Оборудование.Свернуть("Номенклатура, СтавкаНДС, пит_Склад, Цена, пит_Проект", "Количество, Сумма, СуммаНДС");
Объект.Услуги.Свернуть("Номенклатура, СтавкаНДС, Цена", "Количество, Сумма, СуммаНДС");

// Получение представления налогооблажения организации, Справочники.Организации.ФормаДокумента.ПриСозданииНаСервере()
Если ОбщегоНазначения.СсылкаСуществует(Объект.Организация) Тогда
	
	Если Объект.Организация.ЮридическоеФизическоеЛицо = Перечисления.ЮридическоеФизическоеЛицо.ЮридическоеЛицо
		И Объект.Организация.ОбособленноеПодразделение 
		И ЗначениеЗаполнено(Объект.Организация.ГоловнаяОрганизация) Тогда
		СтруктураУчетнойПолитики = ОрганизацииФормыВызовСервера.ПараметрыСистемыНалогообложенияПоОрганизации(Объект.Организация.ГоловнаяОрганизация);
	КонецЕсли;
	
	ИсточникУчетнойПолитики = ?(СтруктураУчетнойПолитики = Неопределено, Объект.Организация, СтруктураУчетнойПолитики);
	СистемаНалогообложенияПредставление = ОрганизацииФормыКлиентСервер.ПредставлениеСистемыНалогообложения(ИсточникУчетнойПолитики);
	
	Если Не СистемаНалогообложенияПредставление = "Общая" Тогда
		Объект.НДСВключенВСтоимость = Истина;
	КонецЕсли;    	
	
КонецЕсли;

Объект.СуммаВключаетНДС = Истина;

ДанныеОбъекта = Новый Структура(
"Дата, ВидОперации, Организация, Склад, ТипЦен, СуммаВключаетНДС,
|ВалютаДокумента, КурсВзаиморасчетов, КратностьВзаиморасчетов, Контрагент, НДСНеВыделять, ЕстьРасхождения,
|РассчитыватьСуммаВРознице, ЗаполнятьСтавкуНДСВРознице, ЭтоКомиссия,
|ДоговорКонтрагента, ПрименяютсяСтавки4и2, СпособЗаполненияСтавкиНДС,
|УчетАгентскогоНДС, ВидАгентскогоДоговора, ПоставщикРезидентТаможенногоСоюза, ВедетсяУчетПрослеживаемыхТоваров,
|СчетУчетаРасчетовСКонтрагентом, СчетУчетаРасчетовПоАвансам, СпособЗачетаАвансов, СчетУчетаРасчетовСКомиссионером, СпособОтраженияРасходовПоАмортизации, СчетУчетаРасчетовПоТаре,
|ЭлектронныеУслуги, ВестиУчетПоДоговорам, ОбратноеНачислениеНДС"); 		
ЗаполнитьЗначенияСвойств(ДанныеОбъекта, Объект);

Выполнить(Алгоритмы.ПодготовкаРеквизитов);

КЗаполнению = Новый Структура;
КЗаполнению.Вставить("СпособОтраженияРасходовПоАмортизации", Истина);
КЗаполнению.Вставить("СчетУчетаРасчетовПоТаре", Истина);
КЗаполнению.Вставить("СпособЗачетаАвансов", Истина);
КЗаполнению.Вставить("СчетУчетаРасчетовПоАвансам", Истина);
КЗаполнению.Вставить("СчетУчетаРасчетовСКонтрагентом", Истина);
КЗаполнению.Вставить("СчетУчетаРасчетовСКомиссионером", Истина);

ПараметрыЗаполнения = Новый Структура;

ПараметрыЗаполнения.Вставить("Заполнять", Истина);
ПараметрыЗаполнения.Вставить("КЗаполнению", КЗаполнению);
ПараметрыЗаполнения.Вставить("ИмяДокумента", "ПоступлениеТоваровУслуг");

ПараметрыЗаполнения.Вставить("ДанныеФормы", Новый Структура);
ПараметрыЗаполнения.ДанныеФормы.Вставить("Объект", ДанныеОбъекта);

ПараметрыЗаполнения.Вставить("ПричиныИзменения", Новый Массив);
ПараметрыЗаполнения.ПричиныИзменения.Добавить("Организация");
ПараметрыЗаполнения.ПричиныИзменения.Добавить("Контрагент");
ПараметрыЗаполнения.ПричиныИзменения.Добавить("ДоговорКонтрагента");

ЗаполненыеСчетаУчетаОбъекта = СчетаУчетаВДокументах.ЗаполнитьОбъектПриИзменении(ПараметрыЗаполнения);

ЗаполнитьЗначенияСвойств(Объект, ПараметрыЗаполнения.ДанныеФормы.Объект, "СпособЗачетаАвансов, СчетУчетаРасчетовПоАвансам, СчетУчетаРасчетовСКонтрагентом, СчетУчетаРасчетовСКомиссионером");

ЭУПДГУИД = Неопределено;
ЭУПДГУИД = ПараметрыОбъекта["ЭУПД"];
ЭУПДСсылка = Неопределено;

Если ЭУПДГУИД &lt;&gt; Неопределено Тогда
	ЭУПДСсылка = Документы.ЭлектронныйДокументУПД.ПолучитьСсылку(Новый УникальныйИдентификатор(ЭУПДГУИД));	
КонецЕсли;

Для Каждого ОбъектКоллекции Из Объект.Товары Цикл
	Это = "Товары";
	Выполнить(Алгоритмы.ЗаполнениеПолейСтроки);
КонецЦикла;

Для Каждого ОбъектКоллекции Из Объект.Оборудование Цикл
	Это = "Оборудование";
	Выполнить(Алгоритмы.ЗаполнениеПолейСтроки);
КонецЦикла;

Для Каждого ОбъектКоллекции Из Объект.Услуги Цикл
	Это = "Услуги";
	Выполнить(Алгоритмы.ЗаполнениеПолейСтроки);
КонецЦикла;

Объект.СпособЗачетаАвансов = Перечисления.СпособыЗачетаАвансов.Автоматически;

Объект.Записать();

СсылкаНаДокумент = Неопределено;
Если ЗначениеЗаполнено(Ссылка) Тогда
	СсылкаНаДокумент = Ссылка;
ИначеЕсли ЗначениеЗаполнено(Объект.Ссылка) Тогда
	СсылкаНаДокумент = Объект.Ссылка;
КонецЕсли;

СрокОплаты = ПараметрыОбъекта["СрокОплаты"];
Если ЗначениеЗаполнено(СрокОплаты) Тогда
	Менеджер = РегистрыСведений.СрокиОплатыДокументов.СоздатьМенеджерЗаписи();
	Менеджер.Организация = СсылкаНаДокумент.Организация;
	Менеджер.Документ = СсылкаНаДокумент;
	Менеджер.СрокОплаты = СрокОплаты;
	Менеджер.Записать();
КонецЕсли;

Если ПараметрыОбъекта["Проведен"] Тогда
	Попытка
		Если ЗначениеЗаполнено(СсылкаНаДокумент) И Не СсылкаНаДокумент.Проведен Тогда
			ЗаписьВРегистр = РегистрыСведений.пит_ОчередьОтложенногоПроведения.СоздатьМенеджерЗаписи();
			ЗаписьВРегистр.Документ = СсылкаНаДокумент;
			ЗаписьВРегистр.ДатаПоступления = ТекущаяДата();
			ЗаписьВРегистр.Записать(); 			
		КонецЕсли; 
		
	Исключение
	КонецПопытки;
Иначе
	Если ЗначениеЗаполнено(СсылкаНаДокумент) И СсылкаНаДокумент.Проведен Тогда
		Объект.Записать(РежимЗаписиДокумента.ОтменаПроведения);	
		ЗаписьВРегистр = РегистрыСведений.пит_ОчередьОтложенногоПроведения.СоздатьМенеджерЗаписи();
		ЗаписьВРегистр.Документ = СсылкаНаДокумент;
		ЗаписьВРегистр.Прочитать();
		ЗаписьВРегистр.Удалить(); 
	КонецЕсли;
КонецЕсли;
ОбъектМодифицирован = Ложь;

ЭтоРеализацияП8Ст161 = 
ДанныеОбъекта.ВидАгентскогоДоговора = ПредопределенноеЗначение("Перечисление.ВидыАгентскихДоговоров.РеализацияТоваров")
И ДанныеОбъекта.ОбратноеНачислениеНДС;

ТребуетсяСчетФактура = 
Не ДанныеОбъекта.УчетАгентскогоНДС
И Не ДанныеОбъекта.ЭтоКомиссия
И ДанныеОбъекта.ВидОперации &lt;&gt; ПредопределенноеЗначение("Перечисление.ВидыОперацийПоступлениеТоваровУслуг.ВПереработку")
И ДанныеОбъекта.ВидОперации &lt;&gt; ПредопределенноеЗначение("Перечисление.ВидыОперацийПоступлениеТоваровУслуг.ПриобретениеЗемельныхУчастков")
И (ЗначениеЗаполнено(ДанныеОбъекта.ДоговорКонтрагента) ИЛИ Не ДанныеОбъекта.ВестиУчетПоДоговорам) И Не ДанныеОбъекта.НДСНеВыделять
И Не ДанныеОбъекта.ЭлектронныеУслуги
ИЛИ ЭтоРеализацияП8Ст161;

ЭУПДДокумент = Неопределено;

Если ЭУПДСсылка &lt;&gt; Неопределено Тогда
	Попытка
		ЭУПДДокумент = ЭУПДСсылка.ПолучитьОбъект();
		
		ЭУПДДокумент.ОснованиеДокументУчетнойСистемы = СсылкаНаДокумент; 
		ЭУПДДокумент.Записать();
		
		РегистрыСведений.РеестрДокументовЭДО.УстановитьСвязь(СсылкаНаДокумент, ЭУПДДокумент.Ссылка);
	Исключение
	КонецПопытки
КонецЕсли;

Если ТребуетсяСчетФактура Тогда
	
	Если ЗначениеЗаполнено(ДанныеОбъекта.ДоговорКонтрагента) Тогда
		ЭтоКомиссияНаЗакупку  = ДанныеОбъекта.ДоговорКонтрагента.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СКомиссионеромНаЗакупку;
	Иначе
		ЭтоКомиссияНаЗакупку  = Ложь;
	КонецЕсли;
	
	Если ЭУПДДокумент &lt;&gt; Неопределено Тогда
		Если ЗначениеЗаполнено(ЭУПДДокумент.Контрагент) Тогда
			Продавец = ЭУПДДокумент.Контрагент;
		Иначе
			Продавец = Неопределено;
		КонецЕсли;
	ИначеЕсли ЗначениеЗаполнено(ДанныеОбъекта.Контрагент) Тогда
		Продавец = ДанныеОбъекта.Контрагент;
	Иначе
		Продавец = Неопределено;
	КонецЕсли;
	
	ПараметрыСозданияСчетаФактуры = УчетНДСКлиентСервер.НовыеПараметрыСозданияПолученногоСчетаФактуры();
	ПараметрыСозданияСчетаФактуры.Основание = СсылкаНаДокумент;
	ПараметрыСозданияСчетаФактуры.НомерСчетаФактурыПолученного = ПараметрыОбъекта["НомерСчетаФактуры"];
	ПараметрыСозданияСчетаФактуры.ДатаСчетаФактурыПолученного  = ПараметрыОбъекта["ДатаСчетаФактуры"];
	ПараметрыСозданияСчетаФактуры.Продавец = ?(ЭтоКомиссияНаЗакупку, Продавец, Неопределено);
	
	СтруктураОтбора = Неопределено;
	
	Результат = УчетНДСВызовСервера.СоздатьСчетФактуруПолученныйНаОсновании(
	ПараметрыСозданияСчетаФактуры, СтруктураОтбора);
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>ДокументСсылка.itilprofПоступлениеАктивов</Источник>
				<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
				<Свойства>
					<Свойство>
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ДоговорКонтрагента --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>ПР_Фирма --&gt; Организация</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПР_Фирма" Вид="Реквизит" Тип="СправочникСсылка.ПР_Фирмы"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>Проведен</ИмяПараметраДляПередачи>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ПР_Проект --&gt; пит_Проект</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПР_Проект" Вид="Реквизит" Тип="СправочникСсылка.ПР_Проекты"/>
						<Приемник Имя="пит_Проект" Вид="Реквизит" Тип="СправочникСсылка.пит_Проекты"/>
						<ПередВыгрузкой>Если Источник.ПР_ПроектВТабличнойЧасти Тогда
	Если Источник.Активы.Количество() &lt;&gt; 0 Тогда
		Значение = Источник.Активы[0].ПР_Проект;	
	КонецЕсли;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Значение = "" + Источник.Номер + " " + Источник.Дата;
Если ЗначениеЗаполнено(Источник.Комментарий) Тогда
	Значение = Значение + " - " + Источник.Комментарий;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
					</Свойство>
					<Свойство>
						<Код>33</Код>
						<Наименование>ПР_ДатаСчетаФактуры --&gt; ДатаСчетаФактуры</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПР_ДатаСчетаФактуры" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ДатаСчетаФактуры</ИмяПараметраДляПередачи>
					</Свойство>
					<Свойство>
						<Код>34</Код>
						<Наименование>ПР_НомерСчетаФактуры --&gt; НомерСчетаФактуры</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ПР_НомерСчетаФактуры" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>НомерСчетаФактуры</ИмяПараметраДляПередачи>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ДокументОснование --&gt; ЭУПД</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ЭУПД</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = ?(ЗначениеЗаполнено(Источник.ДокументОснование), Строка(Источник.ДокументОснование.УникальныйИдентификатор()), "");</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>43</Код>
						<Наименование>ПР_ДатаОплаты --&gt; СрокОплаты</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="ПР_ДатаОплаты" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>СрокОплаты</ИмяПараметраДляПередачи>
					</Свойство>
					<Свойство>
						<Код>32</Код>
						<Наименование>ВалютаДокумента --&gt; ВалютаДокумента</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
					</Свойство>
					<Группа>
						<Код>16</Код>
						<Наименование>Активы --&gt; Товары</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Активы" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = "ВЫБРАТЬ
|	ГРАО.Раздел КАК Раздел,
|	ГРАО.Ключ КАК Ключ,
|	ГРАО.КлючСсылка КАК КлючСсылка
|ИЗ
|	РегистрСведений.пит_ГибкийРегистрАналитикОбмена.СрезПоследних(&amp;ТекДата, Раздел = ""Обмен_БП_ITIL""
|																		И Ключ = ""ЯвляетсяОборудованием""
|																		И КлючСсылка = &amp;ВидНоменклатуры
|																		И Значение = Истина) КАК ГРАО";
ВидНоменклатуры = ОбъектКоллекции.КонфигурационнаяЕдиница.Владелец.ПР_ВидНоменклатуры;
Запрос.УстановитьПараметр("ТекДата", ТекущаяДата());
Запрос.УстановитьПараметр("ВидНоменклатуры", ВидНоменклатуры);
Результат = Запрос.Выполнить();
Отказ = Не Результат.Пустой() ИЛИ ВидНоменклатуры.ПР_Услуга;</ПередВыгрузкой>
						<Свойство>
							<Код>17</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>КонфигурационнаяЕдиница --&gt; Номенклатура</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="КонфигурационнаяЕдиница" Вид="Реквизит" Тип="СправочникСсылка.itilprofКонфигурационныеЕдиницы"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>Аналитика1 --&gt; пит_Склад</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Аналитика1" Вид="Реквизит"/>
							<Приемник Имя="пит_Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
							<ПередВыгрузкой>Выполнить(Алгоритмы.УстановитьСкладПередВыгрузкойПоступления);</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>22</Код>
						<Наименование>Активы --&gt; Оборудование</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="Активы" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Оборудование" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = "ВЫБРАТЬ
|	ГРАО.Раздел КАК Раздел,
|	ГРАО.Ключ КАК Ключ,
|	ГРАО.КлючСсылка КАК КлючСсылка
|ИЗ
|	РегистрСведений.пит_ГибкийРегистрАналитикОбмена.СрезПоследних(&amp;ТекДата, Раздел = ""Обмен_БП_ITIL""
|																		И Ключ = ""ЯвляетсяОборудованием""
|																		И КлючСсылка = &amp;ВидНоменклатуры
|																		И Значение = Истина) КАК ГРАО";
ВидНоменклатуры = ОбъектКоллекции.КонфигурационнаяЕдиница.Владелец.ПР_ВидНоменклатуры;
Запрос.УстановитьПараметр("ТекДата", ТекущаяДата());
Запрос.УстановитьПараметр("ВидНоменклатуры", ВидНоменклатуры);
Результат = Запрос.Выполнить();
Отказ = Результат.Пустой();</ПередВыгрузкой>
						<Свойство>
							<Код>25</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>КонфигурационнаяЕдиница --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="КонфигурационнаяЕдиница" Вид="Реквизит" Тип="СправочникСсылка.itilprofКонфигурационныеЕдиницы"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>Аналитика1 --&gt; пит_Склад</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Аналитика1" Вид="Реквизит"/>
							<Приемник Имя="пит_Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
							<ПередВыгрузкой>Выполнить(Алгоритмы.УстановитьСкладПередВыгрузкойПоступления);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>28</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование>ПР_Проект --&gt; пит_Проект</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ПР_Проект" Вид="Реквизит" Тип="СправочникСсылка.ПР_Проекты"/>
							<Приемник Имя="пит_Проект" Вид="Реквизит" Тип="СправочникСсылка.пит_Проекты"/>
							<КодПравилаКонвертации>пит_Проекты                                       </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Группа>
						<Код>35</Код>
						<Наименование>Активы --&gt; Услуги</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="Активы" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>ВидНоменклатуры = ОбъектКоллекции.КонфигурационнаяЕдиница.Владелец.ПР_ВидНоменклатуры;
Отказ = Не ВидНоменклатуры.ПР_Услуга;</ПередВыгрузкой>
						<Свойство>
							<Код>36</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>КонфигурационнаяЕдиница --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="КонфигурационнаяЕдиница" Вид="Реквизит" Тип="СправочникСсылка.itilprofКонфигурационныеЕдиницы"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>100</Порядок>
			<Правило>
				<Код>ДоговорыКонтрагентов</Код>
				<Наименование>Справочник: Договоры</Наименование>
				<Порядок>50</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.ДоговорыКонтрагентов</Источник>
				<Приемник>СправочникСсылка.ДоговорыКонтрагентов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Контрагенты</Код>
				<Наименование>Справочник: Контрагенты</Наименование>
				<Порядок>100</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.Контрагенты</Источник>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<Свойства>
					<Свойство Обязательное="true">
						<Код>2</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>пит_Проекты</Код>
				<Наименование>Справочник: Проекты</Наименование>
				<Порядок>150</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.ПР_Проекты</Источник>
				<Приемник>СправочникСсылка.пит_Проекты</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>2</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Склады</Код>
				<Наименование>Справочник: Склады (места хранения)</Наименование>
				<Порядок>150</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.Склады</Источник>
				<Приемник>СправочникСсылка.Склады</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Склады"/>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>5</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Организации</Код>
				<Наименование>Справочник: Фирмы</Наименование>
				<Порядок>200</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.ПР_Фирмы</Источник>
				<Приемник>СправочникСсылка.Организации</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ПР_ИНН --&gt; ИНН</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ПР_ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Пользователи</Код>
				<Наименование>Справочник: Пользователи</Наименование>
				<Порядок>250</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.Пользователи</Источник>
				<Приемник>СправочникСсылка.Пользователи</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Номенклатура</Код>
				<Наименование>Справочник: Конфигурационные единицы</Наименование>
				<Порядок>300</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.itilprofКонфигурационныеЕдиницы</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>2</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НоменклатураПоставщиков</Код>
				<Наименование>Справочник: Номенклатура поставщиков</Наименование>
				<Порядок>350</Порядок>
				<ПослеЗагрузки>Объект.Упаковка = Объект.Номенклатура.ЕдиницаИзмерения;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ПР_НоменклатураПоставщиков</Источник>
				<Приемник>СправочникСсылка.НоменклатураКонтрагентов</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Поставщик --&gt; ВладелецНоменклатуры</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Поставщик" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="ВладелецНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Наименование --&gt; НаименованиеНоменклатуры</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="НаименованиеНоменклатуры" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Наименование --&gt; НаименованиеПолное</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>КонфигурационнаяЕдиница --&gt; Номенклатура</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="КонфигурационнаяЕдиница" Вид="Реквизит" Тип="СправочникСсылка.itilprofКонфигурационныеЕдиницы"/>
						<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Идентификатор --&gt; Идентификатор</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Идентификатор" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Идентификатор" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Валюты</Код>
				<Наименование>Справочник: Валюты</Наименование>
				<Порядок>400</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.Валюты</Источник>
				<Приемник>СправочникСсылка.Валюты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ФизическиеЛица</Код>
				<Наименование>Справочник: Физические лица</Наименование>
				<Порядок>500</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.ФизическиеЛица</Источник>
				<Приемник>СправочникСсылка.ФизическиеЛица</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>ДатаРождения --&gt; ДатаРождения</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СтруктураПредприятия</Код>
				<Наименование>Справочник: Подразделения предприятия</Наименование>
				<Порядок>550</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.СтруктураПредприятия</Источник>
				<Приемник>СправочникСсылка.ПодразделенияОрганизаций</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>9</ПриводитьКДлине>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторЕдиницИзмерения</Код>
				<Наименование>Справочник: Классификатор единиц измерения</Наименование>
				<Порядок>600</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.КлассификаторЕдиницИзмерения</Источник>
				<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>4</ПриводитьКДлине>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>150</Порядок>
			<Правило>
				<Код>СтавкиНДС</Код>
				<Наименование>Перечисление: Ставки НДС</Наименование>
				<Порядок>100</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>ПеречислениеСсылка.СтавкиНДС</Источник>
				<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БезНДС --&gt; БезНДС</Наименование>
						<Порядок>50</Порядок>
						<Источник>БезНДС</Источник>
						<Приемник>БезНДС</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>НДС0 --&gt; НДС0</Наименование>
						<Порядок>100</Порядок>
						<Источник>НДС0</Источник>
						<Приемник>НДС0</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>НДС10 --&gt; НДС10</Наименование>
						<Порядок>150</Порядок>
						<Источник>НДС10</Источник>
						<Приемник>НДС10</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>НДС10_110 --&gt; НДС10_110</Наименование>
						<Порядок>200</Порядок>
						<Источник>НДС10_110</Источник>
						<Приемник>НДС10_110</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>НДС18 --&gt; НДС18</Наименование>
						<Порядок>250</Порядок>
						<Источник>НДС18</Источник>
						<Приемник>НДС18</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>НДС18_118 --&gt; НДС18_118</Наименование>
						<Порядок>300</Порядок>
						<Источник>НДС18_118</Источник>
						<Приемник>НДС18_118</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>НДС20 --&gt; НДС20</Наименование>
						<Порядок>350</Порядок>
						<Источник>НДС20</Источник>
						<Приемник>НДС20</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>НДС20_120 --&gt; НДС20_120</Наименование>
						<Порядок>400</Порядок>
						<Источник>НДС20_120</Источник>
						<Приемник>НДС20_120</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ГруппыОС</Код>
				<Наименование>Перечисление: Группы учета ОС</Наименование>
				<Порядок>150</Порядок>
				<Источник>ПеречислениеСсылка.ПР_ГруппыУчетаОС</Источник>
				<Приемник>ПеречислениеСсылка.ГруппыОС</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ДругиеВидыОсновныхСрдеств --&gt; ДругиеВидыОсновныхСр</Наименование>
						<Порядок>50</Порядок>
						<Источник>ДругиеВидыОсновныхСредств</Источник>
						<Приемник>ДругиеВидыОсновныхСредств</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Здания --&gt; Здания</Наименование>
						<Порядок>100</Порядок>
						<Источник>Здания</Источник>
						<Приемник>Здания</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ЗемельныеУчастки --&gt; ЗемельныеУчастки</Наименование>
						<Порядок>150</Порядок>
						<Источник>ЗемельныеУчастки</Источник>
						<Приемник>ЗемельныеУчастки</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>КапитальныеВложенияВАрендованноеИмущество --&gt; Капи</Наименование>
						<Порядок>200</Порядок>
						<Источник>КапитальныеВложенияВАрендованноеИмущество</Источник>
						<Приемник>КапитальныеВложенияВАрендованноеИмущество</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>МашиныИОборудование --&gt; МашиныИОборудование</Наименование>
						<Порядок>250</Порядок>
						<Источник>МашиныИОборудование</Источник>
						<Приемник>МашиныИОборудование</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>МноголетниеНасаждения --&gt; МноголетниеНасаждения</Наименование>
						<Порядок>300</Порядок>
						<Источник>МноголетниеНасаждения</Источник>
						<Приемник>МноголетниеНасаждения</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>ОбъектыПриродопользования --&gt; ОбъектыПриродопользо</Наименование>
						<Порядок>350</Порядок>
						<Источник>ОбъектыПриродопользования</Источник>
						<Приемник>ОбъектыПриродопользования</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>ОфисноеОборудование --&gt; ОфисноеОборудование</Наименование>
						<Порядок>400</Порядок>
						<Источник>ОфисноеОборудование</Источник>
						<Приемник>ОфисноеОборудование</Приемник>
					</Значение>
					<Значение>
						<Код>9</Код>
						<Наименование>ПродуктивныйСкот --&gt; ПродуктивныйСкот</Наименование>
						<Порядок>450</Порядок>
						<Источник>ПродуктивныйСкот</Источник>
						<Приемник>ПродуктивныйСкот</Приемник>
					</Значение>
					<Значение>
						<Код>10</Код>
						<Наименование>ПроизводственныйИХозяйственныйИнвентарь --&gt; Произв</Наименование>
						<Порядок>500</Порядок>
						<Источник>ПроизводственныйИХозяйственныйИнвентарь</Источник>
						<Приемник>ПроизводственныйИХозяйственныйИнвентарь</Приемник>
					</Значение>
					<Значение>
						<Код>11</Код>
						<Наименование>ПрочиеОбъекты --&gt; ПрочееИмуществоТребующееГосударс</Наименование>
						<Порядок>550</Порядок>
						<Источник>ПрочееИмуществоТребующееГосударственнойРегистрации</Источник>
						<Приемник>ПрочееИмуществоТребующееГосударственнойРегистрации</Приемник>
					</Значение>
					<Значение>
						<Код>12</Код>
						<Наименование>РабочийСкот --&gt; РабочийСкот</Наименование>
						<Порядок>600</Порядок>
						<Источник>РабочийСкот</Источник>
						<Приемник>РабочийСкот</Приемник>
					</Значение>
					<Значение>
						<Код>13</Код>
						<Наименование>Сооружения --&gt; Сооружения</Наименование>
						<Порядок>650</Порядок>
						<Источник>Сооружения</Источник>
						<Приемник>Сооружения</Приемник>
					</Значение>
					<Значение>
						<Код>14</Код>
						<Наименование>ТранспортныеСредства --&gt; ТранспортныеСредства</Наименование>
						<Порядок>700</Порядок>
						<Источник>ТранспортныеСредства</Источник>
						<Приемник>ТранспортныеСредства</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийРеализацияТоваров</Код>
				<Наименование>Перечисление: Виды операций с активами и конфигурациями</Наименование>
				<Порядок>200</Порядок>
				<Источник>ПеречислениеСсылка.itilprofВидыОпераций</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийРеализацияТоваров</Приемник>
				<Свойства/>
				<Значения/>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>itilprofПоступлениеАктивов</Код>
				<Наименование>itilprofПоступлениеАктивов</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>ПоступлениеТоваровУслуг                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.itilprofПоступлениеАктивов</ОбъектВыборки>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>100</Порядок>
			<Правило Отключить="false">
				<Код>ПР_НоменклатураПоставщиков</Код>
				<Наименование>ПР_НоменклатураПоставщиков</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>НоменклатураПоставщиков                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ПР_НоменклатураПоставщиков</ОбъектВыборки>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Группа Имя="ПеремещениеАктивов">
			<Алгоритм Имя="ЗаполнениеСтрокиПередачаОС" ИспользуетсяПриЗагрузке="true">
				<Текст>// Подготовка структур

ДанныеСтрокиТаблицы = Новый Структура(
"ОсновноеСредство, ЕдиницаИзмерения, Количество, 
|Цена, Сумма, СтавкаНДС, СуммаНДС,
|КодТНВЭД"); // Для ПараметрыЗаполненияСчетовУчета
ЗаполнитьЗначенияСвойств(ДанныеСтрокиТаблицы, ОбъектКоллекции);

СведенияОНоменклатуре = БухгалтерскийУчетПереопределяемый.ПолучитьСведенияОНоменклатуре(
ОбъектКоллекции.ОсновноеСредство, ДанныеОбъекта, Ложь);

Если СведенияОНоменклатуре &lt;&gt; Неопределено Тогда
	ДанныеСтрокиТаблицы.КодТНВЭД = СведенияОНоменклатуре.КодТНВЭД;
	//ПараметрыОбработки.ДанныеСтрокиТаблицы.ПрослеживаемыйТовар = СведенияОНоменклатуре.ПрослеживаемыйТовар Или СведенияОНоменклатуре.ПрослеживаемыйКомплект;
	//ПараметрыОбработки.ДанныеСтрокиТаблицы.ПрослеживаемыйКомплект = СведенияОНоменклатуре.ПрослеживаемыйКомплект;
КонецЕсли;
ЗаполнитьЗначенияСвойств(ОбъектКоллекции, ДанныеСтрокиТаблицы, "КодТНВЭД");</Текст>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнениеСтрокиПеремещениеТоваров" ИспользуетсяПриЗагрузке="true">
				<Текст>// Подготовка структур

ДанныеСтрокиТаблицы = Новый Структура(
"Номенклатура, Коэффициент, Количество,
|СчетУчета, НовыйСчетУчета, СпособУчетаНДС"); // Для ПараметрыЗаполненияСчетовУчета
ЗаполнитьЗначенияСвойств(ДанныеСтрокиТаблицы, ОбъектКоллекции);

// Заполнение параметров

ПараметрыЗаполненияСчетовУчета = СчетаУчетаВДокументахКлиентСервер.НовыйПараметрыЗаполнения(
"ПеремещениеТоваров",
"Товары.Номенклатура",
			Объект,
			ОбъектКоллекции,
			ДанныеОбъекта,
			ДанныеСтрокиТаблицы);

ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.СчетУчета", Истина);
ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.НовыйСчетУчета", Истина);
ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.СпособУчетаНДС", Истина);

ПараметрыОбработки = Новый Структура();
ПараметрыОбработки.Вставить("ДанныеСтрокиТаблицы", 	 ДанныеСтрокиТаблицы);
ПараметрыОбработки.Вставить("ДанныеОбъекта", 		 ДанныеОбъекта);
ПараметрыОбработки.Вставить("СчетаУчетаКЗаполнению", ПараметрыЗаполненияСчетовУчета.КЗаполнению);

//В функции получаем только нужные параметры

ЗаполненныеСчета = СчетаУчетаВДокументах.ЗаполнитьРеквизитыПриИзменении(
			Документы.ПеремещениеТоваров,
			ПараметрыОбработки.СчетаУчетаКЗаполнению,
			ПараметрыОбработки.ДанныеОбъекта,
			"Товары",
			ПараметрыОбработки.ДанныеСтрокиТаблицы);

ЗаполнитьЗначенияСвойств(ПараметрыОбработки.ДанныеСтрокиТаблицы, ЗаполненныеСчета);

//Если Не ЗначениеЗаполнено(ПараметрыОбработки.ДанныеОбъекта.ТипЦен) Тогда
//	ПараметрыОбработки.ДанныеОбъекта.Вставить("СпособЗаполненияЦены", Перечисления.СпособыЗаполненияЦен.ПоЗакупочнымЦенам);
//КонецЕсли;

//ПараметрыОбработки.ДанныеОбъекта.Вставить("СпособЗаполненияРозничнойЦены", Перечисления.СпособыЗаполненияЦен.ПоЗакупочнымЦенам);

//СведенияОНоменклатуре = БухгалтерскийУчетПереопределяемый.ПолучитьСведенияОНоменклатуре(
//ОбъектКоллекции.Номенклатура, ПараметрыОбработки.ДанныеОбъекта, Ложь);

//Если СведенияОНоменклатуре &lt;&gt; Неопределено Тогда
//	ПараметрыОбработки.ДанныеСтрокиТаблицы.СтранаПроисхождения = СведенияОНоменклатуре.СтранаПроисхождения;
//	ПараметрыОбработки.ДанныеСтрокиТаблицы.НомерГТД = СведенияОНоменклатуре.НомерГТД;
//	ПараметрыОбработки.ДанныеСтрокиТаблицы.ПрослеживаемыйТовар = СведенияОНоменклатуре.ПрослеживаемыйТовар Или СведенияОНоменклатуре.ПрослеживаемыйКомплект;
//	ПараметрыОбработки.ДанныеСтрокиТаблицы.ПрослеживаемыйКомплект = СведенияОНоменклатуре.ПрослеживаемыйКомплект;
//КонецЕсли;
ЗаполнитьЗначенияСвойств(ОбъектКоллекции, ПараметрыОбработки.ДанныеСтрокиТаблицы, "СчетУчета, СпособУчетаНДС, НовыйСчетУчета");</Текст>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнениеСтрокиПоступлениеТоваровИзПеремещения" ИспользуетсяПриЗагрузке="true">
				<Текст>// Подготовка структур

ДанныеСтрокиТаблицы = Новый Структура(
"Номенклатура, ЕдиницаИзмерения, Коэффициент, Количество, 
|СчетНаОплатуПокупателю, СчетНаОплатуПокупателюПредставление,
|Цена, Сумма, СтавкаНДС, СуммаНДС,
|СчетУчета, СпособУчетаНДС, СчетУчетаНДС, НомерГТД, СтранаПроисхождения"); // Для ПараметрыЗаполненияСчетовУчета
ЗаполнитьЗначенияСвойств(ДанныеСтрокиТаблицы, ОбъектКоллекции);

// Заполнение параметров

ПараметрыЗаполненияСчетовУчета = СчетаУчетаВДокументахКлиентСервер.НовыйПараметрыЗаполнения(
"ПоступлениеТоваровУслуг",
"Оборудование.Номенклатура",
			Объект,
			ОбъектКоллекции,
			ДанныеОбъекта,
			ДанныеСтрокиТаблицы);

ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Оборудование.СпособУчетаНДС", Истина);
ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Оборудование.СчетУчетаНДС", Истина);
ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Оборудование.СчетУчета", Истина);

ПараметрыОбработки = Новый Структура();
ПараметрыОбработки.Вставить("ДанныеСтрокиТаблицы", 	 ДанныеСтрокиТаблицы);
ПараметрыОбработки.Вставить("ДанныеОбъекта", 		 ДанныеОбъекта);
ПараметрыОбработки.Вставить("СчетаУчетаКЗаполнению", ПараметрыЗаполненияСчетовУчета.КЗаполнению);

//В функции получаем только нужные параметры

ЗаполненныеСчета = СчетаУчетаВДокументах.ЗаполнитьРеквизитыПриИзменении(
			Документы.ПоступлениеТоваровУслуг,
			ПараметрыОбработки.СчетаУчетаКЗаполнению,
			ПараметрыОбработки.ДанныеОбъекта,
			"Оборудование",
			ПараметрыОбработки.ДанныеСтрокиТаблицы);

ЗаполнитьЗначенияСвойств(ПараметрыОбработки.ДанныеСтрокиТаблицы, ЗаполненныеСчета);

СведенияОНоменклатуре = БухгалтерскийУчетПереопределяемый.ПолучитьСведенияОНоменклатуре(
ОбъектКоллекции.Номенклатура, ПараметрыОбработки.ДанныеОбъекта, Ложь);

Если СведенияОНоменклатуре &lt;&gt; Неопределено Тогда
	ПараметрыОбработки.ДанныеСтрокиТаблицы.СтранаПроисхождения = СведенияОНоменклатуре.СтранаПроисхождения;
	ПараметрыОбработки.ДанныеСтрокиТаблицы.НомерГТД = СведенияОНоменклатуре.НомерГТД;
	//ПараметрыОбработки.ДанныеСтрокиТаблицы.ПрослеживаемыйТовар = СведенияОНоменклатуре.ПрослеживаемыйТовар Или СведенияОНоменклатуре.ПрослеживаемыйКомплект;
	//ПараметрыОбработки.ДанныеСтрокиТаблицы.ПрослеживаемыйКомплект = СведенияОНоменклатуре.ПрослеживаемыйКомплект;
КонецЕсли;
ЗаполнитьЗначенияСвойств(ОбъектКоллекции, ПараметрыОбработки.ДанныеСтрокиТаблицы, "СчетУчета, СпособУчетаНДС, СчетУчетаНДС, НомерГТД, СтранаПроисхождения");</Текст>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнениеСтрокиРасходМатериалов" ИспользуетсяПриЗагрузке="true">
				<Текст>// Подготовка структур

ДанныеСтрокиТаблицы = Новый Структура(
"Номенклатура, Коэффициент, Количество,
|Счет, СтатьяЗатрат, НоменклатурнаяГруппа, НомерГТД, СтранаПроисхождения"); // Для ПараметрыЗаполненияСчетовУчета
ЗаполнитьЗначенияСвойств(ДанныеСтрокиТаблицы, ОбъектКоллекции);

// Заполнение параметров

ПараметрыЗаполненияСчетовУчета = СчетаУчетаВДокументахКлиентСервер.НовыйПараметрыЗаполнения(
"ТребованиеНакладная",
"Материалы.Номенклатура",
			Объект,
			ОбъектКоллекции,
			ДанныеОбъекта,
			ДанныеСтрокиТаблицы);

ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Материалы.Счет", Истина);
ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Материалы.СтатьяЗатрат", Истина);
ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Материалы.НоменклатурнаяГруппа", Истина);

ПараметрыОбработки = Новый Структура();
ПараметрыОбработки.Вставить("ДанныеСтрокиТаблицы", 	 ДанныеСтрокиТаблицы);
ПараметрыОбработки.Вставить("ДанныеОбъекта", 		 ДанныеОбъекта);
ПараметрыОбработки.Вставить("СчетаУчетаКЗаполнению", ПараметрыЗаполненияСчетовУчета.КЗаполнению);

//В функции получаем только нужные параметры

ЗаполненныеСчета = СчетаУчетаВДокументах.ЗаполнитьРеквизитыПриИзменении(
			Документы.ТребованиеНакладная,
			ПараметрыОбработки.СчетаУчетаКЗаполнению,
			ПараметрыОбработки.ДанныеОбъекта,
			"Материалы",
			ПараметрыОбработки.ДанныеСтрокиТаблицы);

ЗаполнитьЗначенияСвойств(ПараметрыОбработки.ДанныеСтрокиТаблицы, ЗаполненныеСчета);

//Если Не ЗначениеЗаполнено(ПараметрыОбработки.ДанныеОбъекта.ТипЦен) Тогда
//	ПараметрыОбработки.ДанныеОбъекта.Вставить("СпособЗаполненияЦены", Перечисления.СпособыЗаполненияЦен.ПоЗакупочнымЦенам);
//КонецЕсли;

//ПараметрыОбработки.ДанныеОбъекта.Вставить("СпособЗаполненияРозничнойЦены", Перечисления.СпособыЗаполненияЦен.ПоЗакупочнымЦенам);

СведенияОНоменклатуре = БухгалтерскийУчетПереопределяемый.ПолучитьСведенияОНоменклатуре(
ОбъектКоллекции.Номенклатура, ПараметрыОбработки.ДанныеОбъекта, Ложь);

Если СведенияОНоменклатуре &lt;&gt; Неопределено Тогда
	ПараметрыОбработки.ДанныеСтрокиТаблицы.СтранаПроисхождения = СведенияОНоменклатуре.СтранаПроисхождения;
	ПараметрыОбработки.ДанныеСтрокиТаблицы.НомерГТД = СведенияОНоменклатуре.НомерГТД;
	//ПараметрыОбработки.ДанныеСтрокиТаблицы.ПрослеживаемыйТовар = СведенияОНоменклатуре.ПрослеживаемыйТовар Или СведенияОНоменклатуре.ПрослеживаемыйКомплект;
	//ПараметрыОбработки.ДанныеСтрокиТаблицы.ПрослеживаемыйКомплект = СведенияОНоменклатуре.ПрослеживаемыйКомплект;
КонецЕсли;
ЗаполнитьЗначенияСвойств(ОбъектКоллекции, ПараметрыОбработки.ДанныеСтрокиТаблицы, "Счет, НомерГТД, СтранаПроисхождения");</Текст>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнениеСтрокиРеализацияТоваров" ИспользуетсяПриЗагрузке="true">
				<Текст>// Подготовка структур

ДанныеСтрокиТаблицы = Новый Структура(
"Номенклатура, ЕдиницаИзмерения, Коэффициент, Количество, 
|СчетНаОплатуПокупателю, СчетНаОплатуПокупателюПредставление,
|Цена, Сумма, СтавкаНДС, СуммаНДС,
|СчетУчета, КодТНВЭД, СчетДоходов, СчетУчетаНДСПоРеализации, СчетРасходов, НомерГТД, СтранаПроисхождения"); // Для ПараметрыЗаполненияСчетовУчета
ЗаполнитьЗначенияСвойств(ДанныеСтрокиТаблицы, ОбъектКоллекции);

// Заполнение параметров

ПараметрыЗаполненияСчетовУчета = СчетаУчетаВДокументахКлиентСервер.НовыйПараметрыЗаполнения(
"РеализацияТоваровУслуг",
"Товары.Номенклатура",
			Объект,
			ОбъектКоллекции,
			ДанныеОбъекта,
			ДанныеСтрокиТаблицы);

ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.СчетУчета", Истина);
ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.СчетДоходов", Истина);
ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.СчетУчетаНДСПоРеализации", Истина);
ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.СчетРасходов", Истина);

ПараметрыОбработки = Новый Структура();
ПараметрыОбработки.Вставить("ДанныеСтрокиТаблицы", 	 ДанныеСтрокиТаблицы);
ПараметрыОбработки.Вставить("ДанныеОбъекта", 		 ДанныеОбъекта);
ПараметрыОбработки.Вставить("СчетаУчетаКЗаполнению", ПараметрыЗаполненияСчетовУчета.КЗаполнению);

//В функции получаем только нужные параметры

ЗаполненныеСчета = СчетаУчетаВДокументах.ЗаполнитьРеквизитыПриИзменении(
			Документы.РеализацияТоваровУслуг,
			ПараметрыОбработки.СчетаУчетаКЗаполнению,
			ПараметрыОбработки.ДанныеОбъекта,
			"Товары",
			ПараметрыОбработки.ДанныеСтрокиТаблицы);

ЗаполнитьЗначенияСвойств(ПараметрыОбработки.ДанныеСтрокиТаблицы, ЗаполненныеСчета);

СведенияОНоменклатуре = БухгалтерскийУчетПереопределяемый.ПолучитьСведенияОНоменклатуре(
ОбъектКоллекции.Номенклатура, ПараметрыОбработки.ДанныеОбъекта, Ложь);

Если СведенияОНоменклатуре &lt;&gt; Неопределено Тогда
	ПараметрыОбработки.ДанныеСтрокиТаблицы.СтранаПроисхождения = СведенияОНоменклатуре.СтранаПроисхождения;
	ПараметрыОбработки.ДанныеСтрокиТаблицы.НомерГТД = СведенияОНоменклатуре.НомерГТД;
	ПараметрыОбработки.ДанныеСтрокиТаблицы.КодТНВЭД = СведенияОНоменклатуре.КодТНВЭД;
	//ПараметрыОбработки.ДанныеСтрокиТаблицы.ПрослеживаемыйТовар = СведенияОНоменклатуре.ПрослеживаемыйТовар Или СведенияОНоменклатуре.ПрослеживаемыйКомплект;
	//ПараметрыОбработки.ДанныеСтрокиТаблицы.ПрослеживаемыйКомплект = СведенияОНоменклатуре.ПрослеживаемыйКомплект;
КонецЕсли;
ЗаполнитьЗначенияСвойств(ОбъектКоллекции, ПараметрыОбработки.ДанныеСтрокиТаблицы, "СчетУчета, КодТНВЭД, СчетДоходов, СчетУчетаНДСПоРеализации, СчетРасходов, НомерГТД, СтранаПроисхождения");</Текст>
			</Алгоритм>
		</Группа>
		<Группа Имя="ПоступлениеАктивов">
			<Алгоритм Имя="ЗаписатьВПротоколЗагрузкаТолькоИнформация" ИспользуетсяПриЗагрузке="true">
				<Текст>//// Сообщаем пользователю
//Сообщение = Новый СообщениеПользователю;
//Сообщение.Текст = ТекстСообщения;
//Сообщение.Сообщить();  

// Заносим в протокол загрузки
Уровень = 1;
ЗаписатьВПротоколВыполнения(ТекстСообщения, , Ложь, Уровень, , Истина);

//// Падаем в ошибку
//ВызватьИсключение ТекстСообщения;</Текст>
				<Параметры>ТекстСообщения</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнениеПолейСтроки" ИспользуетсяПриЗагрузке="true">
				<Текст>// Подготовка структур
Если Это = "Товары" Тогда	
	ДанныеСтрокиТаблицы = Новый Структура(
	"Номенклатура, ЕдиницаИзмерения, Коэффициент, Количество,
	|Цена, Сумма, СтавкаНДС, СуммаНДС,
	|НадписьПоДокументу, КоличествоПоДокументу, СуммаПоДокументу, СуммаНДСПоДокументу, ЦенаПоДокументу, ВсегоПоДокументу,
	|НадписьОтклонение, КоличествоОтклонение, СуммаОтклонение,  СуммаНДСОтклонение, ЦенаОтклонение, ВсегоОтклонение, 
	|НадписьПоФакту, НомерГТД, ПрослеживаемыйТовар, ПрослеживаемыйКомплект, СтранаПроисхождения,
	|ЦенаВРознице, СуммаВРознице, СтавкаНДСВРознице,
	|ОтражениеВУСН, МаркируемаяПродукцияГосИС,
	|ПродукцияМаркируемаяДляГИСМ, ПрослеживаемыйТовар,
	|СчетУчета, СчетУчетаНДС, ПодразделениеЗатрат, Субконто2, Субконто1, Субконто3, СчетЗатрат, СпособУчетаНДС"); // Для ПараметрыЗаполненияСчетовУчета
	ЗаполнитьЗначенияСвойств(ДанныеСтрокиТаблицы, ОбъектКоллекции);
	
ИначеЕсли Это = "Оборудование" Тогда
	
	ДанныеСтрокиТаблицы = Новый Структура(
	"Номенклатура, ЕдиницаИзмерения, Коэффициент, Количество,
	|Цена, Сумма, СтавкаНДС, СуммаНДС,
	|НомерГТД, СтранаПроисхождения, Всего, ИдентификаторСтроки, РНПТ, ПодсказкаРНПТ, ПрослеживаемыйТовар, ПрослеживаемыйКомплект,
	|СчетУчета, СчетУчетаНДС, СпособУчетаНДС");   // Для ПараметрыЗаполненияСчетовУчета 	
	ЗаполнитьЗначенияСвойств(ДанныеСтрокиТаблицы, ОбъектКоллекции);
	
ИначеЕсли Это = "Услуги" Тогда
	
	ДанныеСтрокиТаблицы = Новый Структура(
	"Номенклатура, ЕдиницаИзмерения, Коэффициент, Количество,
	|Цена, Сумма, СтавкаНДС, СуммаНДС,
	|НомерГТД, СтранаПроисхождения, Всего, ИдентификаторСтроки, РНПТ, ПодсказкаРНПТ, ПрослеживаемыйТовар,
	|АР_ОбъектАренды, 
	|СпособУчетаНДС, СчетЗатрат, Субконто1, Субконто2, Субконто3, ПодразделениеЗатрат, СчетУчетаНДС, СчетЗатратНУ, СубконтоНУ1, СубконтоНУ2, СубконтоНУ3");   // Для ПараметрыЗаполненияСчетовУчета 	
	ЗаполнитьЗначенияСвойств(ДанныеСтрокиТаблицы, ОбъектКоллекции);
	
КонецЕсли;


// Заполнение параметров

ПараметрыЗаполненияСчетовУчета = СчетаУчетаВДокументахКлиентСервер.НовыйПараметрыЗаполнения(
"ПоступлениеТоваровУслуг",
Это + ".Номенклатура",
			Объект,
			ОбъектКоллекции,
			ДанныеОбъекта,
			ДанныеСтрокиТаблицы);

Если Это = "Товары" Тогда	
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.ПодразделениеЗатрат", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.Субконто2", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.Субконто1", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.Субконто3", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.СчетЗатрат", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.СпособУчетаНДС", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.СчетУчетаНДС", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Товары.СчетУчета", Истина);
ИначеЕсли Это = "Оборудование" Тогда
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Оборудование.СпособУчетаНДС", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Оборудование.СчетУчетаНДС", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Оборудование.СчетУчета", Истина);
ИначеЕсли Это = "Услуги" Тогда
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Услуги.СпособУчетаНДС", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Услуги.СчетЗатрат", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Услуги.Субконто1", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Услуги.Субконто2", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Услуги.Субконто3", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Услуги.ПодразделениеЗатрат", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Услуги.СчетУчетаНДС", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Услуги.СчетЗатратНУ", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Услуги.СубконтоНУ1", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Услуги.СубконтоНУ2", Истина);
	ПараметрыЗаполненияСчетовУчета.КЗаполнению.Вставить("Услуги.СубконтоНУ3", Истина);
КонецЕсли;
			
ПараметрыОбработки = Новый Структура();
ПараметрыОбработки.Вставить("ДанныеСтрокиТаблицы", 	 ДанныеСтрокиТаблицы);
ПараметрыОбработки.Вставить("ДанныеОбъекта", 		 ДанныеОбъекта);
ПараметрыОбработки.Вставить("СчетаУчетаКЗаполнению", ПараметрыЗаполненияСчетовУчета.КЗаполнению);

//В функции получаем только нужные параметры, ПриИзмненииНоменклатуры - ПоступлениеТоваровУслугФормыКлиент.ПодготовитьПараметрыОбработкиТоварыНоменклатураПриИзменении(Объект, ОбъектКоллекции);

ЗаполненныеСчета = СчетаУчетаВДокументах.ЗаполнитьРеквизитыПриИзменении(
			Документы.ПоступлениеТоваровУслуг,
			ПараметрыОбработки.СчетаУчетаКЗаполнению,
			ПараметрыОбработки.ДанныеОбъекта,
			Это,
			ПараметрыОбработки.ДанныеСтрокиТаблицы);

ЗаполнитьЗначенияСвойств(ПараметрыОбработки.ДанныеСтрокиТаблицы, ЗаполненныеСчета);

Если Не ЗначениеЗаполнено(ПараметрыОбработки.ДанныеОбъекта.ТипЦен) Тогда
	ПараметрыОбработки.ДанныеОбъекта.Вставить("СпособЗаполненияЦены", Перечисления.СпособыЗаполненияЦен.ПоЗакупочнымЦенам);
КонецЕсли;

ПараметрыОбработки.ДанныеОбъекта.Вставить("СпособЗаполненияРозничнойЦены", Перечисления.СпособыЗаполненияЦен.ПоЗакупочнымЦенам);

СведенияОНоменклатуре = БухгалтерскийУчетПереопределяемый.ПолучитьСведенияОНоменклатуре(
ОбъектКоллекции.Номенклатура, ПараметрыОбработки.ДанныеОбъекта, Ложь);

Если Это = "Оборудование" Или Это = "Товары" Тогда
	Если СведенияОНоменклатуре &lt;&gt; Неопределено Тогда
		ПараметрыОбработки.ДанныеСтрокиТаблицы.СтранаПроисхождения = СведенияОНоменклатуре.СтранаПроисхождения;
		ПараметрыОбработки.ДанныеСтрокиТаблицы.НомерГТД = СведенияОНоменклатуре.НомерГТД;
		ПараметрыОбработки.ДанныеСтрокиТаблицы.ПрослеживаемыйТовар = СведенияОНоменклатуре.ПрослеживаемыйТовар Или СведенияОНоменклатуре.ПрослеживаемыйКомплект;
		ПараметрыОбработки.ДанныеСтрокиТаблицы.ПрослеживаемыйКомплект = СведенияОНоменклатуре.ПрослеживаемыйКомплект;
	КонецЕсли;
	ЗаполнитьЗначенияСвойств(ОбъектКоллекции, ПараметрыОбработки.ДанныеСтрокиТаблицы, "СчетУчета, СчетУчетаНДС, СтранаПроисхождения, НомерГТД, ПрослеживаемыйТовар, ПрослеживаемыйКомплект");
	
	Если ОбъектКоллекции.ПрослеживаемыйТовар И ЭУПДСсылка &lt;&gt; Неопределено И ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура) Тогда
		Запрос = Новый Запрос;
		Запрос.Текст = "ВЫБРАТЬ
		|	ЭУПДОС.НомерРНПТ КАК НомерРНПТ
		|ПОМЕСТИТЬ ВТ_НомераРНПТ
		|ИЗ
		|	Документ.ЭлектронныйДокументУПД.ОсновныеСредства КАК ЭУПДОС
		|ГДЕ
		|	ЭУПДОС.Ссылка = &amp;ЭУПД
		|	И ЭУПДОС.Номенклатура = &amp;Номенклатура
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	ВТ_НомераРНПТ.НомерРНПТ КАК НомерРНПТ,
		|	НомераГТД.Ссылка  КАК РНПТ
		|ИЗ
		|	ВТ_НомераРНПТ КАК ВТ_НомераРНПТ
		|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.НомераГТД КАК НомераГТД
		|		ПО ВТ_НомераРНПТ.НомерРНПТ = НомераГТД.Код";
		Запрос.УстановитьПараметр("ЭУПД", ЭУПДСсылка);
		Запрос.УстановитьПараметр("Номенклатура", ОбъектКоллекции.Номенклатура);
		Выборка = Запрос.Выполнить().Выбрать();
		РНПТ = Неопределено;
		Пока Выборка.Следующий() Цикл
			Если ЗначениеЗаполнено(Выборка.РНПТ) Тогда
				РНПТ = Выборка.РНПТ;
			ИначеЕсли ЗначениеЗаполнено(Выборка.НомерРНПТ) Тогда
				Попытка
					РНПТ = Справочники.НомераГТД.СоздатьЭлемент();
					РНПТ.Код = Выборка.НомерРНПТ;
					РНПТ.Комментарий = "Обмен ITIL";
					СтруктураРеквизитов = Справочники.НомераГТД.РегистрационныйНомерИСтранаВвоза(РНПТ.Код);
					ЗаполнитьЗначенияСвойств(РНПТ, СтруктураРеквизитов);
					РНПТ.Записать();
					РНПТ = РНПТ.Ссылка;
				Исключение
				КонецПопытки;
			КонецЕсли;	
		КонецЦикла;
		
		Если ЗначениеЗаполнено(РНПТ) Тогда
			ОбъектКоллекции.ИдентификаторСтроки = Строка(Новый УникальныйИдентификатор());
			СтрокаПрослеживаемости = Объект.СведенияПрослеживаемости.Добавить();
			СтрокаПрослеживаемости.РНПТ = РНПТ;
			СтрокаПрослеживаемости.Количество = ОбъектКоллекции.Количество;
			СтрокаПрослеживаемости.КоличествоПрослеживаемости = СтрокаПрослеживаемости.Количество;
			СтрокаПрослеживаемости.ИдентификаторСтроки = ОбъектКоллекции.ИдентификаторСтроки;
		КонецЕсли;	
	КонецЕсли;
ИначеЕсли Это = "Услуги" Тогда
	ЗаполнитьЗначенияСвойств(ОбъектКоллекции, ПараметрыОбработки.ДанныеСтрокиТаблицы, "СчетЗатрат, Субконто1, СчетЗатратНУ, СубконтоНУ1, СчетУчетаНДС");	
КонецЕсли;</Текст>
			</Алгоритм>
			<Алгоритм Имя="ПодготовкаРеквизитов" ИспользуетсяПриЗагрузке="true">
				<Текст>	
	ПлательщикНалогаНаПрибыль   = УчетнаяПолитика.ПлательщикНалогаНаПрибыль(Объект.Организация, Объект.Дата);
	ПлательщикНДС               = УчетнаяПолитика.ПлательщикНДС(Объект.Организация, Объект.Дата);
	УпрощенныйУчетНДС           = УчетнаяПолитика.УпрощенныйУчетНДС(Объект.Организация, Объект.Дата);
	ПрименениеУСН               = УчетнаяПолитика.ПрименяетсяУСН(Объект.Организация, Объект.Дата);
	ПрименениеУСНДоходы         = УчетнаяПолитика.ПрименяетсяУСНДоходы(Объект.Организация, Объект.Дата);
	ПрименяетсяМалоценка        = УчетнаяПолитика.ПрименяетсяФСБУ5_2019(Объект.Дата);
	СпособОценкиТоваровВРознице = УчетнаяПолитика.СпособОценкиТоваровВРознице(Объект.Организация, Объект.Дата);
	УчитыватьТаруЗаБалансом     = УчетнаяПолитика.УчитыватьТаруЗаБалансом(Объект.Организация, Объект.Дата);
	
	УчетВПродажныхЦенах = СпособОценкиТоваровВРознице = Перечисления.СпособыОценкиТоваровВРознице.ПоПродажнойСтоимости;
	
	ИспользоватьТипыЦенНоменклатуры  = ПолучитьФункциональнуюОпцию("ИспользоватьТипыЦенНоменклатуры");	 
	РаздельныйУчетНДСНаСчете19       = УчетнаяПолитика.РаздельныйУчетНДСНаСчете19(Объект.Организация, Объект.Дата);
	РаздельныйУчетНДС                = УчетнаяПолитика.РаздельныйУчетНДС(Объект.Организация, Объект.Дата);
	ЕстьВалютныйУчет                 = БухгалтерскийУчетПереопределяемый.ИспользоватьВалютныйУчет();
	ВестиУчетПоДоговорам             = ПолучитьФункциональнуюОпцию("ВестиУчетПоДоговорам");
	//ОбратноеНачислениеНДС            = БухгалтерскийУчетПереопределяемый.ИспользуетсяОбратноеНачислениеНДС();
	Если БухгалтерскийУчетПереопределяемый.ИспользуетсяОбратноеНачислениеНДС() Тогда
		ОбратноеНачислениеНДСБул = Истина;
	Иначе
		ОбратноеНачислениеНДСБул = Ложь;
	КонецЕсли;
	
	ИспользоватьКорректировочныеДокументы               = ПолучитьФункциональнуюОпцию("ИспользоватьКорректировочныеДокументы");
	ОсуществляетсяЗакупкаТоваровУслугЧерезКомиссионеров = ПолучитьФункциональнуюОпцию("ОсуществляетсяЗакупкаТоваровУслугЧерезКомиссионеров");
	ОсуществляетсяЗакупкаТоваровУслугДляКомитентов      = ПолучитьФункциональнуюОпцию("ОсуществляетсяЗакупкаТоваровУслугДляКомитентов");
	ОсуществляетсяРеализацияТоваровУслугКомитентов      = ПолучитьФункциональнуюОпцию("ОсуществляетсяРеализацияТоваровУслугКомитентов");
	ИспользоватьДоставкуТранспортнойКомпанией           = ПолучитьФункциональнуюОпцию("ИспользоватьДоставкуТранспортнойКомпанией");
	ИспользуетсяПланированиеПлатежей                    = ПолучитьФункциональнуюОпцию("ИспользоватьПланированиеПлатежейПоставщикам");
	ИспользоватьКонтрольныеЗнакиГИСМ                    = ПолучитьФункциональнуюОпцию("ИспользоватьКонтрольныеЗнакиГИСМ");
	ВестиУчетМаркируемойПродукцииИСМП                   = ПолучитьФункциональнуюОпцию("ВестиУчетМаркируемойПродукцииИСМП");
	СпособЗаполненияСтавкиНДС                           = РаботаСДоговорамиКонтрагентовБП.СпособЗаполненияСтавкиНДСПоДоговору(Объект.ДоговорКонтрагента);
	
	ВедетсяУчетПрослеживаемыхТоваров = ПолучитьФункциональнуюОпцию("ВестиУчетПрослеживаемыхТоваров")И ПрослеживаемостьБРУ.ВедетсяУчетПрослеживаемыхТоваров(Объект.Дата);
	
	//СостояниеДокумента = ОбщегоНазначенияБП.СостояниеДокумента(Объект);
	
	Если ЗначениеЗаполнено(Объект.ДоговорКонтрагента) И ОбщегоНазначения.СсылкаСуществует(Объект.ДоговорКонтрагента) Тогда
		РеквизитыДоговора = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(
		Объект.ДоговорКонтрагента, 
		"ВидДоговора, ВалютаВзаиморасчетов, УчетАгентскогоНДС, РасчетыВУсловныхЕдиницах, НДСПоСтавкам4и2, ВидАгентскогоДоговора, ЭлектронныеУслуги");
		ВидДоговора          = РеквизитыДоговора.ВидДоговора;
		ЭтоКомиссия          = РеквизитыДоговора.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СКомитентом;
		ЭтоКомиссияНаЗакупку = РеквизитыДоговора.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СКомиссионеромНаЗакупку;
		УчетАгентскогоНДС    = РеквизитыДоговора.УчетАгентскогоНДС;
		ВидАгентскогоДоговора = РеквизитыДоговора.ВидАгентскогоДоговора;
		ВалютаВзаиморасчетов  = РеквизитыДоговора.ВалютаВзаиморасчетов;
		РасчетыВУЕ            = РеквизитыДоговора.РасчетыВУсловныхЕдиницах;
		ПрименяютсяСтавки4и2  = РеквизитыДоговора.НДСПоСтавкам4и2;
		ЭлектронныеУслуги     = РеквизитыДоговора.ЭлектронныеУслуги;
	Иначе
		ВидДоговора          = Неопределено;
		ЭтоКомиссияНаЗакупку = Ложь;
		ЭтоКомиссия 		 = Ложь;
		УчетАгентскогоНДС    = Ложь;
		РасчетыВУЕ           = Ложь;
		ПрименяютсяСтавки4и2 = Ложь;
		ЭлектронныеУслуги    = Ложь;
	КонецЕсли;
	
	ТипСклада = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Объект.Склад, "ТипСклада");
	Если ТипСклада &lt;&gt; Перечисления.ТипыСкладов.ОптовыйСклад
		И УчетВПродажныхЦенах
		И (Объект.ВидОперации = Перечисления.ВидыОперацийПоступлениеТоваровУслуг.ПокупкаКомиссия
		ИЛИ Объект.ВидОперации = Перечисления.ВидыОперацийПоступлениеТоваровУслуг.Товары
		ИЛИ Объект.ВидОперации = Перечисления.ВидыОперацийПоступлениеТоваровУслуг.Оборудование)
		И ВидДоговора &lt;&gt; Перечисления.ВидыДоговоровКонтрагентов.СКомитентом Тогда
		РассчитыватьСуммаВРознице = Истина;
	Иначе
		РассчитыватьСуммаВРознице = Ложь;
	КонецЕсли;
	
	Если Объект.НДСНеВыделять Тогда
		СтавкаНДС = ПредопределенноеЗначение("Перечисление.СтавкиНДС.БезНДС");
	ИначеЕсли Объект.ВидОперации = ПредопределенноеЗначение("Перечисление.ВидыОперацийПоступлениеТоваровУслуг.ВПереработку") Тогда
		СтавкаНДС = ПредопределенноеЗначение("Перечисление.СтавкиНДС.БезНДС");
	КонецЕсли;
	
	Если СтавкаНДС = ПредопределенноеЗначение("Перечисление.СтавкиНДС.БезНДС") Тогда
		СпособЗаполненияСтавкиНДС = ПредопределенноеЗначение("Перечисление.СпособыЗаполненияСтавкиНДС.БезНДС");
	Иначе
		СпособЗаполненияСтавкиНДС = ПредопределенноеЗначение("Перечисление.СпособыЗаполненияСтавкиНДС.ИзКарточкиНоменклатуры");
	КонецЕсли;
	
	НТТ = ТипСклада = Перечисления.ТипыСкладов.НеавтоматизированнаяТорговаяТочка;
	ПоставщикРезидентТаможенногоСоюза = Справочники.Контрагенты.КонтрагентРезидентТаможенногоСоюза(Объект.Контрагент);
	
	
	СвойстваСчета4112 = БухгалтерскийУчетВызовСервераПовтИсп.ПолучитьСвойстваСчета(
	ПланыСчетов.Хозрасчетный.ТоварыВРозничнойТорговлеВПродажныхЦенахНТТ);
	
	РазделениеПоСтавкамВРознице = СвойстваСчета4112.ВидСубконто1 = ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.СтавкиНДС
	ИЛИ СвойстваСчета4112.ВидСубконто2 = ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.СтавкиНДС
	ИЛИ СвойстваСчета4112.ВидСубконто3 = ПланыВидовХарактеристик.ВидыСубконтоХозрасчетные.СтавкиНДС;
	
	ДанныеОбъекта.РассчитыватьСуммаВРознице         = РассчитыватьСуммаВРознице;
	ДанныеОбъекта.ЗаполнятьСтавкуНДСВРознице        = НТТ И УчетВПродажныхЦенах И РазделениеПоСтавкамВРознице;
	ДанныеОбъекта.ЭтоКомиссия                       = ЭтоКомиссия;
	ДанныеОбъекта.ПрименяютсяСтавки4и2              = ПрименяютсяСтавки4и2;
	ДанныеОбъекта.СпособЗаполненияСтавкиНДС         = СпособЗаполненияСтавкиНДС;
	ДанныеОбъекта.УчетАгентскогоНДС                 = УчетАгентскогоНДС;
	ДанныеОбъекта.ВидАгентскогоДоговора             = ВидАгентскогоДоговора;
	ДанныеОбъекта.ПоставщикРезидентТаможенногоСоюза = ПоставщикРезидентТаможенногоСоюза;
	ДанныеОбъекта.ЕстьРасхождения                   = Объект.ЕстьРасхождения;
	ДанныеОбъекта.ВедетсяУчетПрослеживаемыхТоваров  = ВедетсяУчетПрослеживаемыхТоваров;
	
	ДанныеОбъекта.ЭлектронныеУслуги 				= ЭлектронныеУслуги;
	ДанныеОбъекта.ВестиУчетПоДоговорам 				= ВестиУчетПоДоговорам;
	ДанныеОбъекта.ОбратноеНачислениеНДС 			= ОбратноеНачислениеНДСБул;
	
	Если Объект.НДСНеВыделять Тогда
		ДанныеОбъекта.Вставить("СтавкаНДС", ПредопределенноеЗначение("Перечисление.СтавкиНДС.БезНДС"));
		ДанныеОбъекта.Вставить("СуммаВключаетНДС", Истина);
	ИначеЕсли Объект.ВидОперации = ПредопределенноеЗначение("Перечисление.ВидыОперацийПоступлениеТоваровУслуг.ВПереработку") Тогда
		ДанныеОбъекта.Вставить("СтавкаНДС", ПредопределенноеЗначение("Перечисление.СтавкиНДС.БезНДС"));
	КонецЕсли;</Текст>
			</Алгоритм>
			<Алгоритм Имя="УстановитьСкладПередВыгрузкойПоступления" ИспользуетсяПриЗагрузке="false">
				<Текст>Если ЗначениеЗаполнено(ОбъектКоллекции.Аналитика1) Тогда
	Если ЗначениеЗаполнено(ОбъектКоллекции.Аналитика1.Склад) Тогда
		Значение = ОбъектКоллекции.Аналитика1.Склад;
	Иначе
		Запрос = Новый Запрос;
		Запрос.Текст = "ВЫБРАТЬ
			|	ГРАО.КлючСсылка КАК Склад
			|ИЗ
			|	РегистрСведений.пит_ГибкийРегистрАналитикОбмена.СрезПоследних(
			|			,
			|			Раздел = ""Обмен_БП_ITIL""
			|				И Ключ = ""ЯвляетсяТранзитнымСкладом""
			|				И Значение = ИСТИНА
			|				И КлючСсылка ССЫЛКА Справочник.Склады) КАК ГРАО";
			Результат = Запрос.Выполнить();
			Если Не Результат.Пустой() Тогда
				Значение = Результат.Выгрузить()[0].Склад;
			Иначе
				Значение = Справочники.Склады.ПустаяСсылка();
			КонецЕсли;

	КонецЕсли;
Иначе
	Значение = Справочники.Склады.ПустаяСсылка();
КонецЕсли;</Текст>
			</Алгоритм>
		</Группа>
	</Алгоритмы>
	<Запросы/>
</ПравилаОбмена>